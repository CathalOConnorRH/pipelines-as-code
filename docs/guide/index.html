<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Pipelines as Code Usage Guide #    Repository CRD  Repository CRD # The purposes of the Repository CRD is: To let Pipelines as Code know that this event from this URL needs to be handled. To let Pipelines as Code know on which namespace the PipelineRuns are going to be executed. To reference a api secret, username or api URL if needed for the git provider platforms that requires it (ie: when you are using webhooks method and not the github application)."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="Usage Guide"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="/docs/guide/"><title>Usage Guide | Pipelines as Code</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.82c5dbd23447cee0b4c2aa3ed08ce0961faa40e1fa370eee4f8c9f02e0d46b5f.css><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.8629c295117a93381e50c4509eee27c9e25c0832c243c6213d959c2024241ec8.js></script>
<link rel=alternate type=application/rss+xml href=/docs/guide/index.xml title="Pipelines as Code"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/pipelines-logo.svg alt=Logo><span>Pipelines as Code</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/docs/install/>Installation</a><ul><li><a href=/docs/install/overview/>Overview</a></li><li><a href=/docs/install/installation/>Infrastructure install</a></li><li><a href=/docs/install/settings/>Settings</a></li><li><a href=/docs/install/github_apps/>Github Apps</a></li><li><a href=/docs/install/github_webhook/>Github Webhook</a></li><li><a href=/docs/install/gitlab/>Gitlab</a></li><li><a href=/docs/install/bitbucket_cloud/>Bitbucket Cloud</a></li><li><a href=/docs/install/bitbucket_server/>Bitbucket Server</a></li><li><a href=/docs/install/kubernetes/>Kubernetes</a></li></ul></li><li><a href=/docs/guide/ class=active>Usage Guide</a><ul><li><a href=/docs/guide/repositorycrd/>Repository CRD</a></li><li><a href=/docs/guide/resolver/>Resolver</a></li><li><a href=/docs/guide/autoringprs/>Authoring PipelineRun</a></li><li><a href=/docs/guide/running/>Running the PipelineRun</a></li><li><a href=/docs/guide/statuses/>PipelineRun status</a></li><li><a href=/docs/guide/privaterepo/>Private Repositories</a></li><li><a href=/docs/guide/cleanups/>PipelineRuns Cleanup</a></li><li><a href=/docs/guide/cli/>CLI tkn-pac</a></li></ul></li></ul><ul><li><a href=https://github.com/openshift-pipelines/pipelines-as-code target=_blank rel=noopener>Github Pipelines as Code</a></li><li><a href=https://tekton.dev/docs/ target=_blank rel=noopener>TektonCD Documentation</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Usage Guide</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#pipelines-as-code-usage-guide>Pipelines as Code Usage Guide</a></li></ul></nav></aside></header><article class=markdown><h1 id=pipelines-as-code-usage-guide>Pipelines as Code Usage Guide
<a class=anchor href=#pipelines-as-code-usage-guide>#</a></h1><dl><dt><a href=/docs/guide/repositorycrd/>Repository CRD</a></dt><dd class=markdown-inner>Repository CRD # The purposes of the Repository CRD is:
To let Pipelines as Code know that this event from this URL needs to be handled. To let Pipelines as Code know on which namespace the PipelineRuns are going to be executed. To reference a api secret, username or api URL if needed for the git provider platforms that requires it (ie: when you are using webhooks method and not the github application).</dd><dt><a href=/docs/guide/resolver/>Resolver</a></dt><dd class=markdown-inner>Pipelines as Code resolver # If Pipelines as Code sees a PipelineRun with a reference to a Task or a Pipeline, it will tries to resolves it as a single PipelineRun with an embedded PipelineSpec to a PipelineRun.
It will as well transform the Pipeline Name to a generateName based on the Pipeline name as well.
This allows you to have multiple runs in the same namespace from the same PipelineRun with no risk of conflicts.</dd><dt><a href=/docs/guide/autoringprs/>Authoring PipelineRun</a></dt><dd class=markdown-inner>Authoring PipelineRuns in .tekton/ directory # Pipelines as Code will always try to be as close to the tekton template as possible. Usually you will write your template and save them with a &ldquo;.yaml&rdquo; extension and Pipelines as Code will run them.
Using its resolver Pipelines as Code will try to bundle the PipelineRun with all its Task as a single PipelineRun with no external dependencies.</dd><dt><a href=/docs/guide/running/>Running the PipelineRun</a></dt><dd class=markdown-inner>Running the PipelineRun # The user flow looks like this :
A user create a Pull Request (or Merge Request in Gitlab).
Pipelines as Code picks the event and matches to a Repo CRD installed on the cluster.
The user is allowed to run the CI if :
The user is the owner of the repository. The user is a collaborator on the repository.</dd><dt><a href=/docs/guide/statuses/>PipelineRun status</a></dt><dd class=markdown-inner>Status # GitHub # When the pipeline finishes, the status will be added in the Github Check tabs with a short recap of how long each task of your pipeline took and the output of tkn pr describe.
If there was a failure you can click on the &ldquo;Re-Run&rdquo; button on the left to rerun the Pipeline or you can issue a issue comment with a line starting and finishing with the string /retest to ask Pipelines as Code to retest the current PR.</dd><dt><a href=/docs/guide/privaterepo/>Private Repositories</a></dt><dd class=markdown-inner>Private repositories # Pipelines as Code support private repositories by creating or updating a secret in the target namespace with the user token for the git-clone task to use and be able to clone private repositories.
Whenever Pipelines as Code create a new PipelineRun in the target namespace it will create or update a secret called :
pac-git-basic-auth-REPOSITORY_OWNER-REPOSITORY_NAME
The secret contains a .gitconfig and a git credentials .git-credentials with the https url using the token it discovered from the Github application or attached to the secret.</dd><dt><a href=/docs/guide/cleanups/>PipelineRuns Cleanup</a></dt><dd class=markdown-inner>PipelineRuns Cleanups # There can be a lot of PipelineRuns into an user namespace and Pipelines as Code has the ability to only keep a number of PipelineRuns that matches an event.
For example if the PipelineRun has this annotation :
pipelinesascode.tekton.dev/max-keep-runs: "maxNumber" Pipelines as Code sees this and will start cleaning up right after it finishes a successful execution keeping only the maxNumber of PipelineRuns.
It will skip the Running PipelineRuns but will not skip the PipelineRuns with Unknown status.</dd><dt><a href=/docs/guide/cli/>CLI tkn-pac</a></dt><dd class=markdown-inner>Pipelines as Code CLI # Pipelines as Code provide a powerful CLI designed to work with tkn plugin. tkn-pac allows you to :
bootstrap: quickly bootstrap a Pipelines as Code installation. create: create a new Pipelines as Code Repository. generate: generate a simple pipelinerun to get you started with Pipelines as Code. list: list Pipelines as Code Repositories. describe: describe a Pipelines as Code Repository and the runs associated with it.</dd></dl></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/openshift-pipelines/pipelines-as-code/commit/72af6d20df646465713b6cedcdd8720bb28e2713 title="Last modified by Chmouel Boudjnah | March 29, 2022" target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>March 29, 2022</span></a></div><div><a class="flex align-center" href=https://github.com/openshift-pipelines/pipelines-as-code/edit/main/docs/content/docs/guide/_index.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function e(n){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(n),e.removeAllRanges(),e.addRange(t)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#pipelines-as-code-usage-guide>Pipelines as Code Usage Guide</a></li></ul></nav></div></aside></main></body></html>